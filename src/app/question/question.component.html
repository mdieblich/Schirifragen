<mat-card class="question-card">

  <mat-card-header>
    <div mat-card-avatar>
      <button mat-fab disabled class="question-number">
        <span *ngIf="!id">?</span>
        <span *ngIf="id">{{id}}</span>
      </button>
    </div>
    <mat-card-title class="question-text">
      <span *ngIf="!question">&nbsp;
        <br>&nbsp;</span>
      <span *ngIf="question">{{question.text}}</span>
    </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <mat-progress-bar mode="buffer" *ngIf="!question"></mat-progress-bar>

    <div *ngIf="question" class="container">
      <div class="row">
        <div *ngIf="!finished" class="col-12">&nbsp;</div>
        <div *ngIf="finished" class="col-1 center-text">Lösung</div>
      </div>

      <app-answer 
        *ngFor="let answer of question.answers; let i = index" 
        [finished]="finished" 
        [(correctAnswer)]="correctAnswers[i]"
        [(selectedAnswer)]="selectedAnswers[i]" 
        [i]="i" 
        [answer]="answer">
      </app-answer>

      <div class="row justify-content-start rule-reference">
        <div class="col-1 center-text">
          <button mat-button disabled>
            {{finished?"Regeln:":"&nbsp;"}}
          </button>
        </div>
        <div class="col-1" *ngFor="let rule of question.ruleReferences">
          <button *ngIf="finished" mat-button color="accent">
            {{rule}}
          </button>
        </div>
      </div>
    </div>
  </mat-card-content>

  <mat-card-actions class="question-actions">
    <button mat-raised-button color="primary" (click)="checkAnswers()" [disabled]="finished || !question">Prüfen</button>
    <button mat-raised-button color="primary" (click)="next()" [disabled]="!finished">Weiter</button>
    <span *ngIf="finished">
      Ergebnis: {{score | points}}
    </span>
    <a mat-raised-button color="primary" routerLink="/analysis">Zur Auswertung</a>
  </mat-card-actions>
</mat-card>